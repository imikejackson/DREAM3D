parameters:
  cmake-path: 'cmake'
  ctest-path: 'ctest'
  DREAM3D_SDK: ''

steps:
- script: |
    $(cmake-path) -G Ninja -DDREAM3D_SDK=$(DREAM3D_SDK) -DCMAKE_BUILD_TYPE=Release $(Build.Repository.LocalPath)
  displayName: 'CMake: configure'
# - script: |
#     cd $(Build.BinariesDirectory)
#     $(cmake-path) --build .
#   displayName: 'Build DREAM3D....'
- script: |
    cd $(Build.BinariesDirectory)
    $(ctest-path) -D Experimental
  displayName: 'CMake: ctest'